YUI.add("hermes-template-notification-group-invite",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.escapeExpression;return'<div class="notification">\n	\n	<div class="avatar group small no-menu" style="background-image: url('+o(e.lambda((s=t!=null?t.object:t)!=null?s.bestIconURL:s,t))+');"></div>\n\n	<div class="details">\n		<span class="headline">\n			'+o((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{groupUrl:(s=t!=null?t.object:t)!=null?s.url:s,groupName:(s=t!=null?t.object:t)!=null?s.title:s,intlName:"notifications.NOTIF_GROUP_USER_INVITE"},data:i}))+"\n		</span>\n	</div>\n\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-group-invite",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-notification-added-to-gallery",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.subCount:t,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondGalleryUrl:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.owner:s)!=null?s.profileURL:s,secondGalleryName:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.owner:s)!=null?s.displayname:s,galleryUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,galleryName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_GALLERY_MULTI"},data:i}))+"	\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,galleryUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,galleryName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_GALLERY"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-added-to-gallery",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-photo-fave",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{secondUrl:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.owner:s)!=null?s.url:s,ownerUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,title:(s=t!=null?t.object:t)!=null?s.title:s,owner:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,secondOwner:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.owner:s)!=null?s.displayname:s,count:t!=null?t.subCount:t,intlName:"notifications.PHOTO_FAVE_PLURAL"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,ownerUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,title:(s=t!=null?t.object:t)!=null?s.title:s,owner:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.PHOTO_FAVE_SINGLE"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-photo-fave",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-shell",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=e.lambda,a=e.escapeExpression,f=t!=null?t:{},l=n.helperMissing;return'<div class="notification">\n	\n	<div class="avatar person small no-menu" style="background-image: url('+a(u((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.buddyicon:s,t))+');"></div>\n\n	'+a((n.outlet||t&&t.outlet||l).call(f,t!=null?t.details:t,!1,{name:"outlet",hash:{},data:i}))+'\n	\n	<a class="avatar '+a((o=(o=n.type||(t!=null?t.type:t))!=null?o:l,typeof o=="function"?o.call(f,{name:"type",hash:{},data:i}):o))+' small" style="background-image: url('+a(u((s=(s=(s=t!=null?t.object:t)!=null?s.sizes:s)!=null?s.sq:s)!=null?s.url:s,t))+');" href="'+a(u((s=t!=null?t.object:t)!=null?s.url:s,t))+'"></a>\n\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-shell",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-notification-person-follow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{time:t!=null?t.time:t,intlName:t!=null?t.intlName:t},data:i}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.escapeExpression,u=t!=null?t:{},a=n.helperMissing;return'	<div class="notification">\n	\n	<div class="avatar person small no-menu" style="background-image: url('+o(e.lambda((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.buddyicon:s,t))+');"></div>\n\n	<div class="details">\n		<span class="headline">\n			'+o((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{ownerUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,owner:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.PERSON_FOLLOW"},data:i}))+'\n		</span>\n		<span class="extra-info">\n			'+((s=(n.friendlySinceDate||t&&t.friendlySinceDate||a).call(u,(s=t!=null?t.event:t)!=null?s.timestamp:s,true,true,{name:"friendlySinceDate",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		</span>\n	</div>\n\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-person-follow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-notification-tag",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.subPeopleCount:t,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_TAGS_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_TAGS"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-tag",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-person",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:""},2:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.subPeopleCount:t,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_ADD_PEOPLE"},data:i}))+"\n"},4:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_ADD_PERSON"},data:i}))+"\n"},6:function(e,t,n,r,i){var s;return"		"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,ownerUrl:(s=(s=t!=null?t.object:t)!=null?s.owner:s)!=null?s.url:s,ownerName:(s=(s=t!=null?t.object:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_ADD_ME"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.object:t)!=null?s.owner:s)!=null?s.isMe:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(6,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-person",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-mention",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"		"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.subCount:t,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondPersonUrl:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.owner:s)!=null?s.profileURL:s,secondPersonName:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.owner:s)!=null?s.displayname:s,personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_MENTION_MULTI"},data:i}))+"	\n"},3:function(e,t,n,r,i){var s;return"		"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_MENTION"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-mention",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-photo-group-invite",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.subCount:t,secondGroupUrl:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.group:s)!=null?s.url:s,secondGroupName:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.group:s)!=null?s.title:s,groupUrl:(s=(s=(s=t!=null?t.events:t)!=null?s["1"]:s)!=null?s.group:s)!=null?s.url:s,groupName:(s=(s=t!=null?t.event:t)!=null?s.group:s)!=null?s.title:s,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,intlName:"notifications.NOTIF_PHOTO_GROUP_INVITE_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{groupUrl:(s=(s=t!=null?t.event:t)!=null?s.group:s)!=null?s.url:s,groupName:(s=(s=t!=null?t.event:t)!=null?s.group:s)!=null?s.title:s,ownerUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,title:(s=t!=null?t.object:t)!=null?s.title:s,owner:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_PHOTO_GROUP_INVITE"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=e.lambda,a=e.escapeExpression,f=t!=null?t:{};return'<div class="notification">\n	\n	<div class="avatar group small no-menu" style="background-image: url('+a(u((s=(s=t!=null?t.event:t)!=null?s.group:s)!=null?s.bestIconURL:s,t))+');"></div>\n\n	<div class="details">\n		<span class="headline">\n'+((s=n["if"].call(f,t!=null?t.subCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"		</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+'	</div>\n\n	<div class="avatar '+a((o=(o=n.type||(t!=null?t.type:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(f,{name:"type",hash:{},data:i}):o))+' small" style="background-image: url('+a(u((s=(s=(s=t!=null?t.object:t)!=null?s.sizes:s)!=null?s.sq:s)!=null?s.url:s,t))+');"></div>\n\n</div>'},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-photo-group-invite",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-photo-note",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,count:t!=null?t.subPeopleCount:t,intlName:"notifications.NOTIF_NOTES_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_NOTES"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-photo-note",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("notification-view",function(e){var t=e.flutil;e.namespace("Views")[this.name]=e.Base.create("notification-view",e.FlickrView,[],{langBundles:this.details.langBundles,registries:{person:"person-models",photo:"photo-models",group:"group-info-models"},initializer:function(e){return this.objectId=e.objectId,this.object=e.object,this.objectType=e.objectType,this.subevents=e.events,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e={object:this.object,type:this.objectType,event:this.subevents[0],subCount:this.subevents.length-1,viewer:this.appContext.getViewer(),eventCount:this.subevents.length,events:this.subevents},n;if(this.objectType==="photo"){for(var r=0;r<e.events.length;r++)e.events[r].owner.url="/photos/"+e.event.owner.pathAlias||e.events[r].owner.id;if(e.event.type==="comment")e.people=this.getEventOwners(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1,n="notification-photo-comment";else if(e.event.type==="fave")n="notification-photo-fave";else if(e.event.type==="added_to_gallery")n="notification-added-to-gallery";else if(e.event.type==="people")e.people=this.getTaggedPeople(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1,n="notification-person";else if(e.event.type==="tag")e.people=this.getEventOwners(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1,n="notification-tag";else if(e.event.type==="photo_comment_mention")n="notification-mention";else{if(e.event.type==="group_invite")return n="notification-photo-group-invite",this.setContainerWithTemplate(n,e),this;e.event.type==="note"&&(e.people=this.getEventOwners(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1,n="notification-photo-note")}}else if(this.objectType==="person"){if(e.event&&e.event.type==="contacted")return e.event.owner.url="/photos/"+e.event.owner.pathAlias||e.event.owner.id,this.setContainerWithTemplate("notification-person-follow",e),this}else if(this.objectType==="group")return e.event.type==="group_user_invite"&&this.setContainerWithTemplate("notification-group-invite",e),this;return n&&this.setContainerWithTemplate("notification-shell",t.extend({details:this.templates(n)(e)},e)),this},activate:function(){return this},headline:function(){},getTaggedPeople:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i={id:r.personTagged.id,name:r.personTagged.displayname,url:r.personTagged.profileURL},s=!1;for(var o=0;o<t.length;o++)if(t[o].id===i.id){s=!0;break}s||t.push(i)}return t},getEventOwners:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i={id:r.owner.id,name:r.owner.displayname,url:r.owner.url},s=!1;for(var o=0;o<t.length;o++)if(t[o].id===i.id){s=!0;break}s||t.push(i)}return t}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","hermes-template-notifications","hermes-template-notification-photo-comment","hermes-template-notification-group-invite","hermes-template-notification-added-to-gallery","hermes-template-notification-photo-fave","hermes-template-notification-shell","hermes-template-notification-person-follow","hermes-template-notification-tag","hermes-template-notification-person","hermes-template-notification-mention","hermes-template-notification-photo-group-invite","hermes-template-notification-photo-extra-info","hermes-template-notification-photo-note"],langBundles:["common","relative-dates","notifications"]});
YUI.add("hermes-lang-relative-dates",function(e,t){e.Intl.add("hermes/relative-dates","en-US",{SECOND_LONG:["1 second"],SECONDS_LONG:["${time}"," seconds"],MINUTE_LONG:["1 min"],MINUTES_LONG:["${time}"," mins"],HOUR_LONG:["1 hour"],HOURS_LONG:["${time}"," hours"],DAY_LONG:["1 day"],DAYS_LONG:["${time}"," days"],MONTH_LONG:["1 month"],MONTHS_LONG:["${time}"," months"],YEAR_LONG:["1 year"],YEARS_LONG:["${time}"," years"],SECOND_SHORT:["1s"],SECONDS_SHORT:["${time}","s"],MINUTE_SHORT:["1m"],MINUTES_SHORT:["${time}","m"],HOUR_SHORT:["1h"],HOURS_SHORT:["${time}","h"],DAY_SHORT:["1d"],DAYS_SHORT:["${time}","d"],MONTH_SHORT:["1mo"],MONTHS_SHORT:["${time}","mo"],YEAR_SHORT:["1y"],YEARS_SHORT:["${time}","y"],SECOND_LONG_FUTURE:["in 1 second"],SECONDS_LONG_FUTURE:["in ","${time}"," seconds"],MINUTE_LONG_FUTURE:["in 1 min"],MINUTES_LONG_FUTURE:["in ","${time}"," mins"],HOUR_LONG_FUTURE:["in 1 hour"],HOURS_LONG_FUTURE:["in ","${time}"," hours"],DAY_LONG_FUTURE:["in 1 day"],DAYS_LONG_FUTURE:["in ","${time}"," days"],MONTH_LONG_FUTURE:["in 1 month"],MONTHS_LONG_FUTURE:["in ","${time}"," months"],YEAR_LONG_FUTURE:["in 1 year"],YEARS_LONG_FUTURE:["in ","${time}"," years"],FUTURE_SHORT_FUTURE:["in ","${time}"],SECOND_SHORT_FUTURE:["in 1s"],SECONDS_SHORT_FUTURE:["in ","${time}","s"],MINUTE_SHORT_FUTURE:["in 1m"],MINUTES_SHORT_FUTURE:["in ","${time}","m"],HOUR_SHORT_FUTURE:["in 1h"],HOURS_SHORT_FUTURE:["in ","${time}","h"],DAY_SHORT_FUTURE:["in 1d"],DAYS_SHORT_FUTURE:["in ","${time}","d"],MONTH_SHORT_FUTURE:["in 1mo"],MONTHS_SHORT_FUTURE:["in ","${time}","mo"],YEAR_SHORT_FUTURE:["in 1y"],YEARS_SHORT_FUTURE:["in ","${time}","y"],SECOND_LONG_PAST:["1 second ago"],SECONDS_LONG_PAST:["${time}"," seconds ago"],MINUTE_LONG_PAST:["1 min ago"],MINUTES_LONG_PAST:["${time}"," mins ago"],HOUR_LONG_PAST:["1 hour ago"],HOURS_LONG_PAST:["${time}"," hours ago"],DAY_LONG_PAST:["1 day ago"],DAYS_LONG_PAST:["${time}"," days ago"],MONTH_LONG_PAST:["1 month ago"],MONTHS_LONG_PAST:["${time}"," months ago"],YEAR_LONG_PAST:["1 year ago"],YEARS_LONG_PAST:["${time}"," years ago"],SECOND_SHORT_PAST:["1s ago"],SECONDS_SHORT_PAST:["${time}","s ago"],MINUTE_SHORT_PAST:["1m ago"],MINUTES_SHORT_PAST:["${time}","m ago"],HOUR_SHORT_PAST:["1h ago"],HOURS_SHORT_PAST:["${time}","h ago"],DAY_SHORT_PAST:["1d ago"],DAYS_SHORT_PAST:["${time}","d ago"],MONTH_SHORT_PAST:["1mo ago"],MONTHS_SHORT_PAST:["${time}","mo ago"],YEAR_SHORT_PAST:["1y ago"],YEARS_SHORT_PAST:["${time}","y ago"],NO_DATE:["-"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-notifications",function(e,t){e.Intl.add("hermes/notifications","en-US",{PHOTO_FAVE_SINGLE:["<a href='","${ownerUrl}","'>","${owner}","</a> faved your <a href='","${objectUrl}","'>","${mediaType}","</a>"],PHOTO_FAVE_PLURAL:[{type:"plural",valueName:"count",options:{one:["<a href='","${ownerUrl}","'>","${owner}","</a> and <a href='","${secondUrl}","'>","${secondOwner}","</a> faved your <a href='","${objectUrl}","'>","${mediaType}","</a>"],other:["<a href='","${ownerUrl}","'>","${owner}","</a> and ","${count}"," others faved your <a href='","${objectUrl}","'>","${mediaType}","</a>"]}}],PERSON_FOLLOW:["<a href='","${ownerUrl}","'>","${owner}","</a> is now following you!"],COMMENTS:[{type:"plural",valueName:"count",options:{one:"${#} comment",other:"${#} comments"}}],VIEWS:[{type:"plural",valueName:"count",options:{one:"${#} view",other:"${#} views"}}],FAVES:[{type:"plural",valueName:"count",options:{one:"${#} fave",other:"${#} faves"}}],FOLLOW:["View their profile, photos, and whom they follow."],NOTIF_PHOTO_COMMENT_YOURS:['<a href="',"${personUrl}",'">',"${personName}","</a> commented on your <a href='","${objectUrl}","'>","${mediaType}","</a>"],NOTIF_PHOTO_COMMENT_YOURS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> and <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> commented on your <a href='","${objectUrl}","'>","${mediaType}","</a>"],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> and ","${count}"," others commented on your <a href='","${objectUrl}","'>","${mediaType}","</a>"]}}],NOTIF_PHOTO_COMMENT_OTHER:['<a href="',"${personUrl}",'">',"${personName}",'</a> commented on <a href="',"${ownerUrl}",'">',"${ownerName}","'s</a> <a href='","${objectUrl}","'>","${mediaType}","</a>"],NOTIF_PHOTO_COMMENT_OTHER_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> and <a href="',"${secondPersonUrl}",'">',"${secondPersonName}",'</a> commented on <a href="',"${ownerUrl}",'">',"${ownerName}","'s</a> <a href='","${objectUrl}","'>","${mediaType}","</a>"],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> and ","${count}",' others commented on <a href="',"${ownerUrl}",'">',"${ownerName}","'s</a> <a href='","${objectUrl}","'>","${mediaType}","</a>"]}}],NOTIF_MENTION:['<a href="',"${personUrl}",'">',"${personName}",'</a> mentioned you in a <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_MENTION_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> and <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> and ","${count}"," others"]}},' mentioned you in a <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_PHOTO_GROUP_INVITE:["<a href='","${ownerUrl}","'>","${owner}","</a> invited you to add your <a href='","${objectUrl}","'>","${mediaType}","</a> to the <a href='","${groupUrl}","'>","${groupName}","</a> group"],NOTIF_PHOTO_GROUP_INVITE_MULTI:["You've been invited to add your <a href='","${objectUrl}","'>","${mediaType}","</a> to the ",{type:"plural",valueName:"count",options:{one:["<a href='","${groupUrl}","'>","${groupName}","</a> and <a href='","${secondGroupUrl}","'>","${secondGroupName}","</a>"],other:["<a href='","${groupUrl}","'>","${groupName}","</a> and ","${count}"," other"]}}," groups"],NOTIF_GROUP_USER_INVITE:["You've been invited to join the <a href=\"","${groupUrl}",'">',"${groupName}","</a> group"],NOTIF_TAGS:['<a href="',"${personUrl}",'">',"${personName}",'</a> tagged your <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_TAGS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> and <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> and ","${count}"," others"]}},' tagged your <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_GALLERY:['Your <a href="',"${objectUrl}",'">',"${mediaType}",'</a> was added to the <a href="',"${galleryUrl}",'">',"${galleryName}","</a> gallery"],NOTIF_GALLERY_MULTI:['Your <a href="',"${objectUrl}",'">',"${mediaType}","</a> was added to the ",{type:"plural",valueName:"count",options:{one:['<a href="',"${galleryUrl}",'">',"${galleryName}",'</a> and <a href="',"${secondGalleryUrl}",'">',"${secondGalleryName}","</a>"],other:['<a href="',"${galleryUrl}",'">',"${galleryName}","</a> and ","${count}"," other"]}}," galleries"],NOTIF_ADD_PERSON:['<a href="',"${personUrl}",'">',"${personName}",'</a> was tagged in your <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_ADD_PEOPLE:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> and <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> and ","${count}"," others"]}},' were tagged in your <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_ADD_ME:['You were tagged in <a href="',"${ownerUrl}",'">',"${ownerName}","'s</a> <a href=\"","${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_NOTES:['<a href="',"${personUrl}",'">',"${personName}",'</a> left a note on your <a href="',"${objectUrl}",'">',"${mediaType}","</a>"],NOTIF_NOTES_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> and <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> and ","${count}"," others"]}},' left notes on your <a href="',"${objectUrl}",'">',"${mediaType}","</a>"]})},"@VERSION@",{requires:["intl"]});
YUI.add("notifications-view",function(e,t){var n=require("lib/flog")(t);e.namespace("Views")[this.name]=e.Base.create("notifications-view",e.FlickrView,[],{langBundles:this.details.langBundles,registries:{person:"person-models",photo:"photo-models",group:"group-info-models",gallery:"gallery-models"},initializer:function(e){var t=this.appContext.getViewer();return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.nsid=t&&t.signedIn?t.nsid:undefined,e.nsid=this.nsid,this.pageNum=0,this.height=e.height,this.width=e.width,this.overflowX=e.overflowX,this.overflowY=e.overflowY,this},loadState:function(){return this},buildContainer:function(){var e=this;return this.setContainerWithTemplate("notifications",{notifications:[],height:e.height,width:e.width,overflowX:e.overflowX,overflowY:e.overflowY}),this},activate:function(){var e=this,t=this.get("container").one(".view-more");return e.get("container").one(".view-more").addClass("disabled"),this.registerEventHandler(t.on("click",e.handleViewMoreClick.bind(e))),this.getMoreNotifications(),this},handleViewMoreClick:function(e){if(e.currentTarget.hasClass("disabled"))return;e.currentTarget.addClass("disabled"),this.getMoreNotifications()},getMoreNotifications:function(){var e=this,t;e.showBalls(e.get("container").one(".notifications-list")),e.get("personNotificationsModels")?e.retrieveNotifsPage():(t=this.appContext.getViewer(),this.appContext.getModel("person-notifications-models",t.nsid).then(function(t){e.set("personNotificationsModels",t),e.retrieveNotifsPage()}))},appendPage:function(t){var r=this;t.forEach(function(t){var i=t.toJSON(),s;if(!i.object)return;i.appContext=this.appContext;if(!i.events||i.events.length===0)return;try{s=new e.Views["notification-view"](i),s.initialize(i),s.buildContainer(),s.activate();var o=e.Node.create("<li></li>");o.setHTML(s.get("container").get("outerHTML")),r.get("container").one(".notifications-list").append(o)}catch(u){n.error("failed to initialize and load",{err:u})}})},showBalls:function(t){this.balls||(this.balls=e.Node.create('<li class="loading-balls"></li>'),this.balls.setHTML(this.templates("flickr-balls")({}))),(t||this.get("container")).append(this.balls)},hideBalls:function(){this.balls&&this.balls.remove()},retrieveNotifsPage:function(){var e=this,t=e.get("personNotificationsModels");return t.getValue("notifications").getPage({page:e.pageNum}).then(function(n){t.getValue("notifications").getPage({page:e.pageNum+1}).then(function(n){e.pageNum++,e.set("personNotifications",t.getValue("notifications")),e.appendPage(n),e.hideBalls(),e.get("container").one(".view-more").removeClass("disabled")})})}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications"],langBundles:["notifications"],optional:["person-notifications-models","notification-view","photo-models","group-info-models","person-models","gallery-models"]});
YUI.add("notifications-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("notifications-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return!YUI.Env.isServer&&this.get("container").get("innerHTML")===""&&this.setContainerWithTemplate("notifications-menu",{user:this.appContext.getViewer()}),this},loadState:function(){var t=this,n=this.appContext.getViewer();return n.signedIn?(t.set("user",{signedIn:!0}),this.appContext.getModel("person-notifications-models",n.nsid).then(function(r){var i=r.toJSON();t.set("personNotificationsModel",r);if(!YUI.Env.isServer)return r.registry.remote.readUnreadNotificationCount({id:n.nsid},t.appContext).then(function(){i=r.toJSON(),t.set("user",e.merge(t.get("user"),i))});t.set("user",e.merge(t.get("user"),i))})):(t.set("user",{signedIn:!1}),e.Promise.resolve())},buildContainer:function(){return this.setContainerWithTemplate("notifications-menu",{user:this.get("user")}),this},activate:function(){var e=this;this.registerEventHandler(this.get("container").on("click",e.openMenu.bind(e)))},openMenu:function(){var e=this.get("personNotificationsModel"),t=this.get("container").one(".c-notification-unreadcount");t&&(t.addClass("viewed"),e.registry.remote.updateUnreadNotificationCount({},this.appContext),e.setValue("unreadNotificationCount",0)),this.revealNotifications()},revealNotifications:function(){var t=this.appContext.viewportData.getWidth(),n=t>700?60:75,r=new e.Views["notifications-view"]({appContext:this.appContext,width:"100%"});r.appContext=this.appContext,this.droparound=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,anchorOffsetVertical:-4,anchorOffsetHorizontal:n,mirrorArrowAdjustment:n-11,showDropArrow:!0,contentPadding:0,classList:"notifs-droparound",anchorElement:this.get("container").one(".c-notification-icon"),subview:r,observePageResize:!0,positionFixed:!0,autoSizeToContent:!0}),this.droparound.freeze(),this.droparound.on("closeDroparound",function(){this.closeMenu()}.bind(this)),this.droparound.show()},closeMenu:function(){this.droparound.unfreeze()},destructor:function(){}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications-menu","fluid-droparound-view","notifications-view"],langBundles:["notifications-menu","common"]});
YUI.add("hermes-lang-notifications-menu",function(e,t){e.Intl.add("hermes/notifications-menu","en-US",{})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-person-card",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"					"+e.escapeExpression(e.lambda((s=t!=null?t.person:t)!=null?s.realname:s,t))+"\n					"+((s=n["if"].call(t!=null?t:{},t!=null?t.personLocation:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},2:function(e,t,n,r,i){return" - "},4:function(e,t,n,r,i){var s;return(s=n.each.call(t!=null?t:{},t!=null?t.photostream:t,{name:"each",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:""},5:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:""},6:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression,c=e.lambda;return'					<a href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'" width="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.width:s,t))+'" height="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.height:s,t))+'" style="background: url(https://s.yimg.com/pw/images/spaceball.gif);" data-track="personCardRecentPhotosClick"></a>\n'},8:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'					<a href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'" style="background: url('+l(e.lambda((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.displayUrl:s,t))+');" data-track="personCardRecentPhotosClick"></a>\n'},10:function(e,t,n,r,i){return'			<span class="tertiary">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"person.NO_PHOTOS"},data:i}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression,l=e.lambda;return'\n<div>\n	<section>\n		<div class="follow-subview">'+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["follow-view"]:t,{name:"outlet",hash:{},data:i}))+'</div>\n\n		<div class="attribution">\n			<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.photostream:s,t))+'" data-track="personCardAttributionNameClick">\n				<h3 class="fade-out">'+f(l((s=t!=null?t.person:t)!=null?s.username:s,t))+'</h3>\n			</a>\n		</div>\n		<div class="info">\n			<span class="secondary realname fade-out">\n'+((s=n["if"].call(u,(s=t!=null?t.person:t)!=null?s.realname:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				"+f((o=(o=n.personLocation||(t!=null?t.personLocation:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"personLocation",hash:{},data:i}):o))+'\n			</span>\n		</div>\n\n		<div class="recent-photos">\n'+((s=n["if"].call(u,t!=null?t.photostream:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:"")+'		</div>\n	</section>\n</div>\n\n<div class="links secondary">\n	<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.sendFlickrMail:s,t))+'" data-track="personCardMessageClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.MESSAGE"},data:i}))+'</a>\n	<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.albums:s,t))+'" data-track="personCardAlbumsClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.ALBUMS"},data:i}))+'</a>\n	<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.favorites:s,t))+'" data-track="personCardFavesClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.FAVES"},data:i}))+'</a>\n	<a class="align-right" href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.profile:s,t))+'" data-track="personCardProfileClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.PROFILE"},data:i}))+"</a>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/person-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("person-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("person-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){var t=this,n={contentType:7};return this.nsid?n.id=this.nsid:n.pathAlias=this.pathAlias,(new e.FlickrPromise({person:this.appContext.getModel("person-models",n),photostream:this.appContext.getModel("photostream-models",n),personProfile:this.appContext.getModel("person-profile-models",n)})).then(function(e){return t.personModel=e.person,t.personLocation=e.personProfile.getValue("location"),e.photostream.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.photostreamPhotos=e})},function(e){t.loadingError=!0,e.code===1&&e.message==="User not found"&&(t.badUser=!0)})},buildContainer:function(){var t,n;return this.loadingError?(this.badUser?n='<span class="no-user">'+this.intlMessage({intlName:"person.NO_LONGER_ON_FLICKR"})+"</span>":n='<span class="error-user">'+this.intlMessage({intlName:"person.ERROR_LOADING"})+"</span>",this.setContainerHTML(n)):(t=this.personModel.toJSON(),this.setContainerWithTemplate("person-card",{person:t,photostream:this.photostreamPhotos.map(function(e){return e.toJSON()}),personLocation:this.personLocation,personURLS:e.URLHelper.generatePersonUrls(this.personModel)})),this},activate:function(){var e=this.get("container"),t=e.one(".follow-view"),n=t.one(".relationship"),r=t.one(".relationship > .is-following"),i=e.one(".attribution");return n?r&&i.addClass("shorter"):i.addClass("full"),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-person-card","url-helper"],langBundles:["person","common"]});
YUI.add("hermes-lang-person",function(e,t){e.Intl.add("hermes/person","en-US",{MESSAGE:["Message"],ALBUMS:["Albums"],FAVES:["Faves"],PROFILE:["Profile"],NO_PHOTOS:["This user has no photos visible to you."],NO_LONGER_ON_FLICKR:["This user is not found, or no longer on Flickr."],ERROR_LOADING:["Error loading user card. Please try again."],RELATIONSHIP_FRIEND_ERROR:["There was a problem setting your friend relationship."],RELATIONSHIP_FAMILY_ERROR:["There was a problem setting your family relationship."],SIGN_IN_BEFORE_FOLLOW_TITLE:["You found someone to follow!"],SIGN_IN_BEFORE_FOLLOW_MESSAGE:["That's awesome. Just sign in to follow them."],JOIN_FLICKR_AND_FOLLOW:["Join Flickr to never miss a post from ","${person}","."],SIGN_IN_AND_FOLLOW:["Sign in and follow"],CURATOR_PASS_OVER:["Pass over"],CURATOR_PASS_OVER_UNDO:["Undo pass over"]})},"@VERSION@",{requires:["intl"]});
YUI.add("person-menu-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create("person-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".no-menu"].concat(e.excludeSelectors||[]),this.personSelector=".avatar.person, .photo-attribution .attribution-icon, .comment-icon.circle-icon a, .show-person-menu",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},toJSON:function(){var t=e.merge(this.get("user"));return t},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.personSelector,this))},onClickTarget:function(t){var n=this,r;this.shouldProcessTarget(t.target)&&(t.preventDefault(),t.halt(),r=t.target.ancestor().one(this.personSelector)||t.target.ancestor(this.personSelector)||t.target.ancestor("a"),this.createParamsAndManageState(r),e.rapidTracker.beacon(n.name,"personCardOpened"))},shouldProcessTarget:function(e){return e.ancestor()!==null&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(e){var n={appContext:this.appContext,isActiveViewAgnostic:!0},r="",i;return r=e.getData("person-nsid")||e.ancestor().getData("person-nsid"),r||(i=e.getAttribute("href")||e.ancestor().getAttribute("href"),i.indexOf("/photos")===0?r=i.replace("/photos/","").replace("/",""):i.indexOf("/groups/")===0&&(r=i.slice(i.lastIndexOf("/")+1))),t.nsid(r)?n.nsid=r:n.pathAlias=r,n.signature=r,n},createDialog:function(t,n){var r,i=this;this.fire("open"),e.fire("personMenuOpen"),this.dialogCache.some(function(e){return e.key===t.signature?(r=e.dialog,!0):!1}),r?r.set("anchorElement",n.ancestor().hasClass("comment-icon")?n.ancestor():n):(r=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,anchorOffsetHorizontal:0,observePageResize:!0,anchorElement:n.ancestor().hasClass("comment-icon")?n.ancestor():n,subview:new e.Views["person-card-view"](t)}),r.on("clickOverlay",function(e){i.nextElClicked=[e.clientX,e.clientY]}),r.on("closeDroparound",function(){setTimeout(function(){if(i.nextElClicked){var t=document.elementFromPoint(i.nextElClicked[0],i.nextElClicked[1]),n;t&&(n=e.one(t),n&&i.personSelector.split(",").some(function(e){return n.hasClass(e.replace(".",""))})&&i.shouldProcessTarget(n)&&i.createParamsAndManageState(n)),i.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:r})),this.currentDialog=r,r.show()},closeDialog:function(){this.currentDialog&&(this.currentDialog.close(),e.fire("personMenuClose"))},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=[]}})},"@VERSION@",{requires:["flickr-promise","flickr-view","fluid-droparound-view","person-card-view"],langBundles:["person","common"]});
YUI.add("hermes-template-group-card",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n.each.call(t!=null?t:{},t!=null?t.groupPool:t,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:""},2:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression,c=e.lambda;return'				\n				<a href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'" width="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.width:s,t))+'" height="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.height:s,t))+'"\n'+((s=n["if"].call(u,t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+"				></a>\n				\n"},3:function(e,t,n,r,i){return'					class="restricted"\n'},5:function(e,t,n,r,i){var s;return'					style="background: url('+e.escapeExpression(e.lambda((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.displayUrl:s,t))+');"\n'},7:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.canAddPhotos:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:""},8:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'				<p class="tertiary">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.BE_THE_FIRST"},data:i}))+'</p>\n				<p class="tertiary"><a href="'+a(e.lambda((s=t!=null?t.groupURLS:t)!=null?s.photos:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_SOME_PHOTOS"},data:i}))+"</a></p>\n"},10:function(e,t,n,r,i){return"				<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.NO_PHOTOS"},data:i}))+"</p>\n"},12:function(e,t,n,r,i){var s,o=e.escapeExpression;return'	<a href="'+o(e.lambda((s=t!=null?t.groupURLS:t)!=null?s.admin:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:i}))+"</a>\n"},14:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.group:t)!=null?s.isModerator:s,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:""},15:function(e,t,n,r,i){var s,o=e.escapeExpression;return'		<a href="'+o(e.lambda((s=t!=null?t.groupURLS:t)!=null?s.admin:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:i}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'\n<div>\n	<section>\n		<div class="join-subview">\n\n			'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["join-group-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n		</div>\n\n		<div class="attribution">\n			<a href="'+a(f((s=t!=null?t.groupURLS:t)!=null?s.about:s,t))+'">\n				<h3 class="fade-out">'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,(s=t!=null?t.group:t)!=null?s.title:s,{name:"renderTrustedMarkup",hash:{},data:i}))+'</h3>\n			</a>\n		</div>\n		<div class="stats">\n			<span class="secondary fade-out">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{createdYear:t!=null?t.createdYear:t,intlName:"groups.CREATED_YEAR"},data:i}))+" - "+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{updatedAgo:t!=null?t.updatedAgo:t,intlName:"groups.UPDATED_TIME_AGO"},data:i}))+'</span>\n		</div>\n\n		<div class="recent-photos">\n'+((s=n["if"].call(o,t!=null?t.groupPool:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'		</div>\n	</section>\n</div>\n\n<div class="links secondary">\n	<a href="'+a(f((s=t!=null?t.groupURLS:t)!=null?s.photos:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.PHOTOS_LINK_LABEL"},data:i}))+'</a>\n	<a href="'+a(f((s=t!=null?t.groupURLS:t)!=null?s.discussions:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSIONS_LINK_LABEL"},data:i}))+"</a>\n"+((s=n["if"].call(o,(s=t!=null?t.group:t)!=null?s.isAdmin:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:"")+"</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
